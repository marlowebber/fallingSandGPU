
#pragma kernel CSMain

float randomness;
Texture2D<float4> ResultInput;
RWTexture2D<float4> ResultOutput;

[numthreads(8,8,1)]

void CSMain (uint3 id : SV_DispatchThreadID)
{
	float2 below = float2(id.x  + (randomness * 5) - 2  , id.y  -1   );
	if (ResultInput[id.xy].r > 0.5)
	{
		if (ResultInput[below].r < 0.5 && id.y > 5 && id.x > 5 && id.x < 1024-5)
		{
			ResultOutput[below] = float4(1.0, 0.0, 0.0, 1.0);
			ResultOutput[id.xy] = float4(0.0, 0.0, 0.0, 1.0);
		}
	}
}







